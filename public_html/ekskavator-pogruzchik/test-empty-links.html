<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест обработки пустых ссылок</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .catalog-dropdown, .burger-dropdown, .burger-menu {
            position: relative;
            display: inline-block;
        }
        .dropdown-menu, .burger-menu {
            display: none;
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 10px;
            min-width: 200px;
            z-index: 1000;
        }
        .catalog-dropdown.active .dropdown-menu,
        .burger-dropdown.active .burger-menu {
            display: block;
        }
        .catalog-btn, .burger-btn {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .dropdown-menu a, .burger-menu a {
            display: block;
            padding: 8px 12px;
            color: #333;
            text-decoration: none;
            border-radius: 4px;
        }
        .dropdown-menu a:hover, .burger-menu a:hover {
            background: #f8f9fa;
        }
        .test-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .test-results {
            background: #d4edda;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Тест обработки пустых ссылок в выпадающих списках</h1>
    
    <div class="test-info">
        <h3>Инструкция по тестированию:</h3>
        <ol>
            <li>Нажмите на кнопку "Каталог спецтехники" - откроется выпадающий список</li>
            <li>Нажмите на любую ссылку с пустым href="" в списке</li>
            <li>Должно появиться модальное окно "Страница в разработке"</li>
            <li>Выпадающий список должен закрыться</li>
            <li>Проверьте работу формы и отправку в метрику</li>
        </ol>
    </div>

    <div class="test-section">
        <h3>Тест каталога (header)</h3>
        <div class="catalog-dropdown">
            <button class="catalog-btn">Каталог спецтехники</button>
            <div class="dropdown-menu">
                <a href="">Автобетононасосы</a>
                <a href="">Автогрейдеры</a>
                <a href="https://avtovyshka.рекордика.рф" target="_blank">Автовышки</a>
                <a href="">Асфальтоукладчики</a>
                <a href="">Бульдозеры</a>
                <a href="">Мини-погрузчики</a>
                <a href="">Самосвалы</a>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>Тест бургер-меню</h3>
        <div class="burger-dropdown">
            <button class="burger-btn">Меню</button>
            <div class="burger-menu">
                <a href="">Дорожное строительство</a>
                <a href="">Демонтаж и снос зданий</a>
                <a href="">Вывоз грунта</a>
                <a href="">Перевозка грузов</a>
                <a href="">Планировка грунта</a>
                <a href="">Уборка снега</a>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>Тест футера</h3>
        <div class="catalog-dropdown">
            <button class="catalog-btn">Услуги</button>
            <div class="dropdown-menu">
                <a href="">Аренда спецтехники</a>
                <a href="">Строительные работы</a>
                <a href="">Транспортные услуги</a>
                <a href="">Консультации</a>
            </div>
        </div>
    </div>

    <div class="test-results" id="testResults">
        <h3>Результаты тестирования:</h3>
        <ul id="resultsList">
        </ul>
    </div>

    <script>
        // Функция для добавления результатов тестирования
        function addTestResult(message) {
            const resultsDiv = document.getElementById('testResults');
            const resultsList = document.getElementById('resultsList');
            
            const li = document.createElement('li');
            li.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            resultsList.appendChild(li);
            
            resultsDiv.style.display = 'block';
        }

        // Обработчики для кнопок dropdown'ов
        document.addEventListener('DOMContentLoaded', function() {
            // Каталог
            const catalogBtn = document.querySelector('.catalog-dropdown .catalog-btn');
            const catalogDropdown = document.querySelector('.catalog-dropdown');
            
            if (catalogBtn) {
                catalogBtn.addEventListener('click', function() {
                    catalogDropdown.classList.toggle('active');
                    addTestResult('Каталог открыт/закрыт');
                });
            }

            // Бургер-меню
            const burgerBtn = document.querySelector('.burger-dropdown .burger-btn');
            const burgerDropdown = document.querySelector('.burger-dropdown');
            
            if (burgerBtn) {
                burgerBtn.addEventListener('click', function() {
                    burgerDropdown.classList.toggle('active');
                    addTestResult('Бургер-меню открыто/закрыто');
                });
            }

            // Футер
            const footerBtn = document.querySelector('.catalog-dropdown:last-child .catalog-btn');
            const footerDropdown = document.querySelector('.catalog-dropdown:last-child');
            
            if (footerBtn) {
                footerBtn.addEventListener('click', function() {
                    footerDropdown.classList.toggle('active');
                    addTestResult('Футер открыт/закрыт');
                });
            }

            // Закрытие по клику вне dropdown'а
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.catalog-dropdown, .burger-dropdown')) {
                    document.querySelectorAll('.catalog-dropdown, .burger-dropdown').forEach(dropdown => {
                        dropdown.classList.remove('active');
                    });
                }
            });

            addTestResult('Скрипт инициализирован');
        });

        // Мок Yandex.Метрики для тестирования
        window.ym = function(id, action, goal) {
            console.log(`Yandex.Метрика: ID=${id}, Действие=${action}, Цель=${goal}`);
            addTestResult(`Метрика: ${action} - ${goal}`);
        };
    </script>

    <!-- Подключаем наш обработчик пустых ссылок -->
    <script src="JS/empty-links-handler.js"></script>
</body>
</html>
